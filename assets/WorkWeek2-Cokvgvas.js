var I=Object.defineProperty;var A=i=>{throw TypeError(i)};var N=(i,r,c)=>r in i?I(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c;var D=(i,r,c)=>N(i,typeof r!="symbol"?r+"":r,c),V=(i,r,c)=>r.has(i)||A("Cannot "+c);var q=(i,r,c)=>(V(i,r,"read from private field"),c?c.call(i):r.get(i)),S=(i,r,c)=>r.has(i)?A("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(i):r.set(i,c),E=(i,r,c,h)=>(V(i,r,"write to private field"),h?h.call(i,c):r.set(i,c),c);import{E as C,a as m,b as u,d as t,w as v,v as p,e as k,f as n,D as _,q as w,F as U,s as P,u as T,T as B,o as d}from"./index-BmAhpkZA.js";import{a as b}from"./axios-DTyqpfTh.js";const j=t("h2",{class:"h2"},"使用者",-1),F=t("h3",{class:"h3"},"註冊",-1),L={class:"d-flex flex-column row-gap-2 mb-28"},O=t("label",{for:"registerEmail"},"Email：",-1),W=t("label",{for:"registerPassword"},"密碼：",-1),H=t("label",{for:"registerNickname"},"暱稱：",-1),G=t("button",{type:"submit",class:"btn btn-primary"},"註冊",-1),J={class:"overflow-x-auto mt-3"},K={key:0,class:"text-success"},Q=t("br",null,null,-1),R={key:1,class:"text-danger"},X=t("h3",{class:"h3"},"登入",-1),Y={class:"d-flex flex-column row-gap-2 mb-28"},Z=t("label",{for:"loginEmail"},"Email：",-1),ee=t("label",{for:"loginPassword"},"密碼：",-1),te=t("button",{type:"submit",class:"btn btn-primary"},"登入",-1),se={class:"overflow-x-auto mt-3"},oe={key:0,class:"text-success"},le={key:1,class:"text-danger"},ae=t("h3",{class:"h3"},"驗證",-1),ie={class:"box mb-32"},re={class:"overflow-x-auto mt-3"},ne={key:0,class:"text-success"},ue=t("br",null,null,-1),de={key:1,class:"text-danger"},ce=t("h3",{class:"h3"},"登出",-1),me={class:"box mb-32"},he={class:"overflow-x-auto mt-3"},ve={key:0,class:"text-success"},pe={key:1,class:"text-danger"},ge=t("hr",{class:"hr"},null,-1),fe=t("h2",{class:"h2"},"代辧事項",-1),_e=t("h3",{class:"h3"},"取得所有代辦事項",-1),be={class:"box mb-32"},xe={class:"overflow-x-auto mt-3"},ye={key:0,class:"text-danger"},ke=["onClick"],we=t("h3",{class:"h3"},"新增代辦事項",-1),$e=t("button",{type:"submit",class:"btn btn-primary"},"新增",-1),Ue={class:"overflow-x-auto mt-3"},Ae={key:0,class:"text-success"},De={key:1,class:"text-danger"},Ve=t("h3",{class:"h3"},"更新代辦事項",-1),qe={class:"d-flex flex-column row-gap-2 mb-28"},Se=t("button",{type:"submit",class:"btn btn-primary"},"更新",-1),Ee={class:"overflow-x-auto mt-3"},Ce={key:0,class:"text-success"},Te={key:1,class:"text-danger"},ze=t("h3",{class:"h3"},"刪除代辦事項",-1),Me={class:"d-flex flex-column row-gap-2 mb-28"},Ie=t("button",{type:"submit",class:"btn btn-primary"},"刪除",-1),Ne={class:"overflow-x-auto mt-3"},Pe={key:0,class:"text-success"},Be={key:1,class:"text-danger"},je=t("h3",{class:"h3"},"切換代辦事項狀態",-1),Fe={class:"d-flex flex-column row-gap-2 mb-28"},Le=t("button",{type:"submit",class:"btn btn-primary"},"切換",-1),Oe={class:"overflow-x-auto mt-3"},We={key:0,class:"text-success"},He={key:1,class:"text-danger"},Ge={class:"position-fixed top-0 end-0 p-2"},Je={class:"toast bg-warning bg-opacity-50 w-auto py-1 px-3",role:"alert","aria-live":"assertive","aria-atomic":"true",id:"toast"},Ke={class:"toast-body text-success text-bold"},Qe={class:"p-2 px-3 text-danger bg-info bg-opacity-50 position-fixed bottom-0 end-0",style:{width:"300px"}},x="https://todolist-api.hexschool.io",et={__name:"WorkWeek2",setup(i){var $;class r{constructor(e,f){D(this,"message",m(""));S(this,$,{});E(this,$,new B(e)),this.message.value=f}show(e){e&&(this.message.value=e),q(this,$).show()}}$=new WeakMap;let c;C(()=>{const s=document.querySelector("#toast");c=new r(s,"拷 貝 成 功 ！")});const h={token:m(""),add(s){const e=new Date;e.setDate(e.getDate()+1),e.setHours(1),e.setMinutes(0),e.setSeconds(0),document.cookie=`hex_todo=${s}; expires=${e.toUTCString()}`},get(){return document.cookie.replace(/(?:(?:^|.*;\s*)hex_todo\s*\=\s*([^;]*).*$)|^.*$/,"$1")},remove(){document.cookie="hex_todo=; max-age=0"},addAndUpdate(s){this.add(s),this.getAndUpdate()},getAndUpdate(){const s=this.get();return this.token.value=s||"請先登入！",s}},z=function(){const s=navigator.clipboard;function e(f){s.writeText(f).then(()=>{c.show()}).catch(y=>{console.error(y)})}return{copy:e}}();function g(s){var f,y;return{fail:((y=(f=s.response)==null?void 0:f.data)==null?void 0:y.message)??s.message}}const a={register:{form:m({email:"aaa1@gmail.com",nickname:"ababab",password:"123456"}),result:m({}),do(){console.log("[register] form ==>",this.form.value),b.post(`${x}/users/sign_up`,this.form.value).then(s=>{console.log("res ==>",s),this.result.value={success:s.data.uid}}).catch(s=>{console.error(s),this.result.value=g(s)})}},login:{form:m({email:"aaa1@gmail.com",password:"123456"}),result:m({}),do(){console.log("[login] form ==>",this.form.value),b({method:"post",url:`${x}/users/sign_in`,data:this.form.value}).then(s=>{console.log("res ==>",s),h.addAndUpdate(s.data.token),this.result.value={success:"登入成功！"}}).catch(s=>{console.error(s),this.result.value=g(s)})}},verification:{result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b({url:`${x}/users/checkout`,headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.uid}}).catch(e=>{console.error(e),this.result.value=g(e)})}},logout:{result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"您尚未登入！"};return}b({method:"post",url:`${x}/users/sign_out`,headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.message},h.remove(),h.getAndUpdate()}).catch(e=>{console.error(e),this.result.value=g(e)})}}},o={getter:{result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b({method:"get",url:`${x}/todos/`,headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={data:e.data.data}}).catch(e=>{console.error(e),this.result.value=g(e)})}},creation:{form:m({content:""}),result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b({method:"post",url:`${x}/todos/`,data:this.form.value,headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.newTodo},o.getter.do()}).catch(e=>{console.error(e),this.result.value=g(e)})}},update:{form:m({id:"",content:""}),result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b.put(`${x}/todos/${this.form.value.id}`,{content:this.form.value.content},{headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.message},o.getter.do()}).catch(e=>{console.error(e),this.result.value=g(e)})}},deletion:{form:m({id:""}),result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b.delete(`${x}/todos/${this.form.value.id}`,{headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.message},o.getter.do()}).catch(e=>{console.error(e),this.result.value=g(e)})}},toggle:{form:m({id:""}),result:m({}),do(){const s=h.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}b({method:"patch",url:`${x}/todos/${this.form.value.id}/toggle`,data:this.form.value,headers:{authorization:s}}).then(e=>{console.log("res ==>",e),this.result.value={success:e.data.message},o.getter.do()}).catch(e=>{console.error(e),this.result.value=g(e)})}}};return C(()=>{h.getAndUpdate()}),(s,e)=>{var f,y;return d(),u(U,null,[j,F,t("form",{class:"box mb-32",onSubmit:e[3]||(e[3]=w((...l)=>a.register.do&&a.register.do(...l),["prevent"]))},[t("div",L,[t("div",null,[O,v(t("input",{type:"email",id:"registerEmail","onUpdate:modelValue":e[0]||(e[0]=l=>a.register.form.value.email=l),required:""},null,512),[[p,a.register.form.value.email]])]),t("div",null,[W,v(t("input",{type:"text",id:"registerPassword","onUpdate:modelValue":e[1]||(e[1]=l=>a.register.form.value.password=l),required:""},null,512),[[p,a.register.form.value.password]])]),t("div",null,[H,v(t("input",{type:"text",id:"registerNickname","onUpdate:modelValue":e[2]||(e[2]=l=>a.register.form.value.nickname=l),required:""},null,512),[[p,a.register.form.value.nickname]])])]),G,t("div",J,[a.register.result.value.success?(d(),u("p",K,[k(" 註冊成功！"),Q,k(" UID："+n(`${a.register.result.value.success}`),1)])):a.register.result.value.fail?(d(),u("p",R," 註冊失敗："+n(`${a.register.result.value.fail}`),1)):_("",!0)])],32),X,t("form",{class:"box mb-32",onSubmit:e[6]||(e[6]=w((...l)=>a.login.do&&a.login.do(...l),["prevent"]))},[t("div",Y,[t("div",null,[Z,v(t("input",{type:"email",id:"loginEmail","onUpdate:modelValue":e[4]||(e[4]=l=>a.login.form.value.email=l),required:""},null,512),[[p,a.login.form.value.email]])]),t("div",null,[ee,v(t("input",{type:"text",id:"loginPassword","onUpdate:modelValue":e[5]||(e[5]=l=>a.login.form.value.password=l),required:""},null,512),[[p,a.login.form.value.password]])])]),te,t("div",se,[a.login.result.value.success?(d(),u("p",oe,n(a.login.result.value.success),1)):a.login.result.value.fail?(d(),u("p",le," 登入失敗："+n(`${a.login.result.value.fail}`),1)):_("",!0)])],32),ae,t("section",ie,[t("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...l)=>a.verification.do&&a.verification.do(...l))},"驗證"),t("div",re,[a.verification.result.value.success?(d(),u("p",ne,[k(" 驗證成功！"),ue,k(" UID："+n(`${a.verification.result.value.success}`),1)])):a.verification.result.value.fail?(d(),u("p",de," 驗證失敗："+n(`${a.verification.result.value.fail}`),1)):_("",!0)])]),ce,t("section",me,[t("button",{type:"button",class:"btn btn-primary",onClick:e[8]||(e[8]=(...l)=>a.logout.do&&a.logout.do(...l))},"登出"),t("div",he,[a.logout.result.value.success?(d(),u("p",ve,n(`${a.logout.result.value.success}`),1)):a.logout.result.value.fail?(d(),u("p",pe," 登出失敗："+n(`${a.logout.result.value.fail}`),1)):_("",!0)])]),ge,fe,_e,t("section",be,[t("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=(...l)=>o.getter.do&&o.getter.do(...l))}," 取得代辦事項 "),t("div",xe,[o.getter.result.value.fail?(d(),u("p",ye," 失敗："+n(`${o.getter.result.value.fail}`),1)):o.getter.result.value.data?(d(),u(U,{key:1},[k(" 資料筆數："+n((f=o.getter.result.value.data)==null?void 0:f.length)+" ",1),(d(!0),u(U,null,P(o.getter.result.value.data,(l,M)=>(d(),u("div",{class:"mb-2",key:l.createTime},[k(n(M)+": "+n(l)+"   ",1),t("button",{type:"button",onClick:Re=>T(z).copy(l.id),class:"btn btn-outline-success btn-sm"}," 複製 ID ",8,ke)]))),128))],64)):_("",!0)])]),we,t("form",{class:"box mb-32",onSubmit:e[11]||(e[11]=w((...l)=>o.creation.do&&o.creation.do(...l),["prevent"]))},[t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>o.creation.form.value.content=l),placeholder:"請輸入待辦事項",style:{width:"80%"},required:""},null,512),[[p,o.creation.form.value.content]]),k("    "),$e]),t("div",Ue,[o.creation.result.value.success?(d(),u("p",Ae,n(o.creation.result.value.success),1)):o.creation.result.value.fail?(d(),u("p",De," 失敗："+n(`${o.creation.result.value.fail}`),1)):_("",!0)])],32),Ve,t("form",{class:"box mb-32",onSubmit:e[14]||(e[14]=w((...l)=>o.update.do&&o.update.do(...l),["prevent"]))},[t("div",qe,[t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>o.update.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[p,o.update.form.value.id]])]),t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>o.update.form.value.content=l),placeholder:"請輸入待辦事項",style:{width:"80%"},required:""},null,512),[[p,o.update.form.value.content]])])]),Se,t("div",Ee,[o.update.result.value.success?(d(),u("p",Ce,n(o.update.result.value.success),1)):o.update.result.value.fail?(d(),u("p",Te," 失敗："+n(`${o.update.result.value.fail}`),1)):_("",!0)])],32),ze,t("form",{class:"box mb-32",onSubmit:e[16]||(e[16]=w((...l)=>o.deletion.do&&o.deletion.do(...l),["prevent"]))},[t("div",Me,[t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=l=>o.deletion.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[p,o.deletion.form.value.id]])])]),Ie,t("div",Ne,[o.deletion.result.value.success?(d(),u("p",Pe,n(o.deletion.result.value.success),1)):o.deletion.result.value.fail?(d(),u("p",Be," 失敗："+n(`${o.deletion.result.value.fail}`),1)):_("",!0)])],32),je,t("form",{class:"box mb-32",onSubmit:e[18]||(e[18]=w((...l)=>o.toggle.do&&o.toggle.do(...l),["prevent"]))},[t("div",Fe,[t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=l=>o.toggle.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[p,o.toggle.form.value.id]])])]),Le,t("div",Oe,[o.toggle.result.value.success?(d(),u("p",We,n(o.toggle.result.value.success),1)):o.toggle.result.value.fail?(d(),u("p",He," 失敗："+n(`${o.toggle.result.value.fail}`),1)):_("",!0)])],32),t("div",Ge,[t("div",Je,[t("div",Ke,n((y=T(c))==null?void 0:y.message),1)])]),t("div",Qe,n(h.token),1)],64)}}};export{et as default};
