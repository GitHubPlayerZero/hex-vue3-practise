var N=Object.defineProperty;var A=a=>{throw TypeError(a)};var P=(a,i,m)=>i in a?N(a,i,{enumerable:!0,configurable:!0,writable:!0,value:m}):a[i]=m;var D=(a,i,m)=>P(a,typeof i!="symbol"?i+"":i,m),q=(a,i,m)=>i.has(a)||A("Cannot "+m);var S=(a,i,m)=>(q(a,i,"read from private field"),m?m.call(a):i.get(a)),C=(a,i,m)=>i.has(a)?A("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(a):i.set(a,m),E=(a,i,m,p)=>(q(a,i,"write to private field"),p?p.call(a,m):i.set(a,m),m);import{I as T,r as v,a as n,b as e,f as g,v as c,e as w,t as u,V as h,w as $,F as V,m as B,u as z,T as j,o as d}from"./index-CCdttmor.js";import{a as x}from"./axios-DXsv3KKR.js";const F={class:"d-flex flex-column row-gap-2 mb-28"},L={class:"overflow-x-auto mt-3"},O={key:0,class:"text-success"},W={key:1,class:"text-danger"},H={class:"d-flex flex-column row-gap-2 mb-28"},G={class:"overflow-x-auto mt-3"},J={key:0,class:"text-success"},K={key:1,class:"text-danger"},Q={class:"box mb-32"},R={class:"overflow-x-auto mt-3"},X={key:0,class:"text-success"},Y={key:1,class:"text-danger"},Z={class:"box mb-32"},_={class:"overflow-x-auto mt-3"},tt={key:0,class:"text-success"},et={key:1,class:"text-danger"},st={class:"box mb-32"},ot={class:"overflow-x-auto mt-3"},lt={key:0,class:"text-danger"},rt=["onClick"],at={class:"overflow-x-auto mt-3"},it={key:0,class:"text-success"},ut={key:1,class:"text-danger"},nt={class:"d-flex flex-column row-gap-2 mb-28"},dt={class:"overflow-x-auto mt-3"},mt={key:0,class:"text-success"},vt={key:1,class:"text-danger"},pt={class:"d-flex flex-column row-gap-2 mb-28"},gt={class:"overflow-x-auto mt-3"},ct={key:0,class:"text-success"},ft={key:1,class:"text-danger"},bt={class:"d-flex flex-column row-gap-2 mb-28"},ht={class:"overflow-x-auto mt-3"},xt={key:0,class:"text-success"},yt={key:1,class:"text-danger"},kt={class:"position-fixed top-0 end-0 p-2"},wt={class:"toast bg-warning bg-opacity-50 w-auto py-1 px-3",role:"alert","aria-live":"assertive","aria-atomic":"true",id:"toast"},$t={class:"toast-body text-success text-bold"},Ut={class:"p-2 px-3 text-danger bg-info bg-opacity-50 position-fixed bottom-0 end-0",style:{width:"300px"}},y="https://todolist-api.hexschool.io",St={__name:"WorkWeek2",setup(a){var U;class i{constructor(t,b){D(this,"message",v(""));C(this,U,{});E(this,U,new j(t)),this.message.value=b}show(t){t&&(this.message.value=t),S(this,U).show()}}U=new WeakMap;let m;T(()=>{const s=document.querySelector("#toast");m=new i(s,"拷 貝 成 功 ！")});const p={token:v(""),add(s){const t=new Date;t.setDate(t.getDate()+1),t.setHours(1),t.setMinutes(0),t.setSeconds(0),document.cookie=`hex_todo=${s}; expires=${t.toUTCString()}`},get(){return document.cookie.replace(/(?:(?:^|.*;\s*)hex_todo\s*\=\s*([^;]*).*$)|^.*$/,"$1")},remove(){document.cookie="hex_todo=; max-age=0"},addAndUpdate(s){this.add(s),this.getAndUpdate()},getAndUpdate(){const s=this.get();return this.token.value=s||"請先登入！",s}},I=function(){const s=navigator.clipboard;function t(b){s.writeText(b).then(()=>{m.show()}).catch(k=>{console.error(k)})}return{copy:t}}();function f(s){var b,k;return{fail:((k=(b=s.response)==null?void 0:b.data)==null?void 0:k.message)??s.message}}const r={register:{form:v({email:"aaa1@gmail.com",nickname:"ababab",password:"123456"}),result:v({}),do(){console.log("[register] form ==>",this.form.value),x.post(`${y}/users/sign_up`,this.form.value).then(s=>{console.log("res ==>",s),this.result.value={success:s.data.uid}}).catch(s=>{console.error(s),this.result.value=f(s)})}},login:{form:v({email:"aaa1@gmail.com",password:"123456"}),result:v({}),do(){console.log("[login] form ==>",this.form.value),x({method:"post",url:`${y}/users/sign_in`,data:this.form.value}).then(s=>{console.log("res ==>",s),p.addAndUpdate(s.data.token),this.result.value={success:"登入成功！"}}).catch(s=>{console.error(s),this.result.value=f(s)})}},verification:{result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x({url:`${y}/users/checkout`,headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.uid}}).catch(t=>{console.error(t),this.result.value=f(t)})}},logout:{result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"您尚未登入！"};return}x({method:"post",url:`${y}/users/sign_out`,headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.message},p.remove(),p.getAndUpdate()}).catch(t=>{console.error(t),this.result.value=f(t)})}}},o={getter:{result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x({method:"get",url:`${y}/todos/`,headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={data:t.data.data}}).catch(t=>{console.error(t),this.result.value=f(t)})}},creation:{form:v({content:""}),result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x({method:"post",url:`${y}/todos/`,data:this.form.value,headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.newTodo},o.getter.do()}).catch(t=>{console.error(t),this.result.value=f(t)})}},update:{form:v({id:"",content:""}),result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x.put(`${y}/todos/${this.form.value.id}`,{content:this.form.value.content},{headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.message},o.getter.do()}).catch(t=>{console.error(t),this.result.value=f(t)})}},deletion:{form:v({id:""}),result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x.delete(`${y}/todos/${this.form.value.id}`,{headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.message},o.getter.do()}).catch(t=>{console.error(t),this.result.value=f(t)})}},toggle:{form:v({id:""}),result:v({}),do(){const s=p.getAndUpdate();if(!s){this.result.value={fail:"請先登入！"};return}x({method:"patch",url:`${y}/todos/${this.form.value.id}/toggle`,data:this.form.value,headers:{authorization:s}}).then(t=>{console.log("res ==>",t),this.result.value={success:t.data.message},o.getter.do()}).catch(t=>{console.error(t),this.result.value=f(t)})}}};return T(()=>{p.getAndUpdate()}),(s,t)=>{var b,k;return d(),n(V,null,[t[35]||(t[35]=e("h2",{class:"h2"},"使用者",-1)),t[36]||(t[36]=e("h3",{class:"h3"},"註冊",-1)),e("form",{class:"box mb-32",onSubmit:t[3]||(t[3]=$((...l)=>r.register.do&&r.register.do(...l),["prevent"]))},[e("div",F,[e("div",null,[t[19]||(t[19]=e("label",{for:"registerEmail"},"Email：",-1)),g(e("input",{type:"email",id:"registerEmail","onUpdate:modelValue":t[0]||(t[0]=l=>r.register.form.value.email=l),required:""},null,512),[[c,r.register.form.value.email]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"registerPassword"},"密碼：",-1)),g(e("input",{type:"text",id:"registerPassword","onUpdate:modelValue":t[1]||(t[1]=l=>r.register.form.value.password=l),required:""},null,512),[[c,r.register.form.value.password]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"registerNickname"},"暱稱：",-1)),g(e("input",{type:"text",id:"registerNickname","onUpdate:modelValue":t[2]||(t[2]=l=>r.register.form.value.nickname=l),required:""},null,512),[[c,r.register.form.value.nickname]])])]),t[24]||(t[24]=e("button",{type:"submit",class:"btn btn-primary"},"註冊",-1)),e("div",L,[r.register.result.value.success?(d(),n("p",O,[t[22]||(t[22]=w(" 註冊成功！")),t[23]||(t[23]=e("br",null,null,-1)),w(" UID："+u(`${r.register.result.value.success}`),1)])):r.register.result.value.fail?(d(),n("p",W," 註冊失敗："+u(`${r.register.result.value.fail}`),1)):h("",!0)])],32),t[37]||(t[37]=e("h3",{class:"h3"},"登入",-1)),e("form",{class:"box mb-32",onSubmit:t[6]||(t[6]=$((...l)=>r.login.do&&r.login.do(...l),["prevent"]))},[e("div",H,[e("div",null,[t[25]||(t[25]=e("label",{for:"loginEmail"},"Email：",-1)),g(e("input",{type:"email",id:"loginEmail","onUpdate:modelValue":t[4]||(t[4]=l=>r.login.form.value.email=l),required:""},null,512),[[c,r.login.form.value.email]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"loginPassword"},"密碼：",-1)),g(e("input",{type:"text",id:"loginPassword","onUpdate:modelValue":t[5]||(t[5]=l=>r.login.form.value.password=l),required:""},null,512),[[c,r.login.form.value.password]])])]),t[27]||(t[27]=e("button",{type:"submit",class:"btn btn-primary"},"登入",-1)),e("div",G,[r.login.result.value.success?(d(),n("p",J,u(r.login.result.value.success),1)):r.login.result.value.fail?(d(),n("p",K," 登入失敗："+u(`${r.login.result.value.fail}`),1)):h("",!0)])],32),t[38]||(t[38]=e("h3",{class:"h3"},"驗證",-1)),e("section",Q,[e("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=(...l)=>r.verification.do&&r.verification.do(...l))},"驗證"),e("div",R,[r.verification.result.value.success?(d(),n("p",X,[t[28]||(t[28]=w(" 驗證成功！")),t[29]||(t[29]=e("br",null,null,-1)),w(" UID："+u(`${r.verification.result.value.success}`),1)])):r.verification.result.value.fail?(d(),n("p",Y," 驗證失敗："+u(`${r.verification.result.value.fail}`),1)):h("",!0)])]),t[39]||(t[39]=e("h3",{class:"h3"},"登出",-1)),e("section",Z,[e("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...l)=>r.logout.do&&r.logout.do(...l))},"登出"),e("div",_,[r.logout.result.value.success?(d(),n("p",tt,u(`${r.logout.result.value.success}`),1)):r.logout.result.value.fail?(d(),n("p",et," 登出失敗："+u(`${r.logout.result.value.fail}`),1)):h("",!0)])]),t[40]||(t[40]=e("hr",{class:"hr"},null,-1)),t[41]||(t[41]=e("h2",{class:"h2"},"代辧事項",-1)),t[42]||(t[42]=e("h3",{class:"h3"},"取得所有代辦事項",-1)),e("section",st,[e("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...l)=>o.getter.do&&o.getter.do(...l))}," 取得代辦事項 "),e("div",ot,[o.getter.result.value.fail?(d(),n("p",lt," 失敗："+u(`${o.getter.result.value.fail}`),1)):o.getter.result.value.data?(d(),n(V,{key:1},[w(" 資料筆數："+u((b=o.getter.result.value.data)==null?void 0:b.length)+" ",1),(d(!0),n(V,null,B(o.getter.result.value.data,(l,M)=>(d(),n("div",{class:"mb-2",key:l.createTime},[w(u(M)+": "+u(l)+"   ",1),e("button",{type:"button",onClick:Vt=>z(I).copy(l.id),class:"btn btn-outline-success btn-sm"}," 複製 ID ",8,rt)]))),128))],64)):h("",!0)])]),t[43]||(t[43]=e("h3",{class:"h3"},"新增代辦事項",-1)),e("form",{class:"box mb-32",onSubmit:t[11]||(t[11]=$((...l)=>o.creation.do&&o.creation.do(...l),["prevent"]))},[e("div",null,[g(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>o.creation.form.value.content=l),placeholder:"請輸入待辦事項",style:{width:"80%"},required:""},null,512),[[c,o.creation.form.value.content]]),t[30]||(t[30]=w("    ")),t[31]||(t[31]=e("button",{type:"submit",class:"btn btn-primary"},"新增",-1))]),e("div",at,[o.creation.result.value.success?(d(),n("p",it,u(o.creation.result.value.success),1)):o.creation.result.value.fail?(d(),n("p",ut," 失敗："+u(`${o.creation.result.value.fail}`),1)):h("",!0)])],32),t[44]||(t[44]=e("h3",{class:"h3"},"更新代辦事項",-1)),e("form",{class:"box mb-32",onSubmit:t[14]||(t[14]=$((...l)=>o.update.do&&o.update.do(...l),["prevent"]))},[e("div",nt,[e("div",null,[g(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>o.update.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[c,o.update.form.value.id]])]),e("div",null,[g(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=l=>o.update.form.value.content=l),placeholder:"請輸入待辦事項",style:{width:"80%"},required:""},null,512),[[c,o.update.form.value.content]])])]),t[32]||(t[32]=e("button",{type:"submit",class:"btn btn-primary"},"更新",-1)),e("div",dt,[o.update.result.value.success?(d(),n("p",mt,u(o.update.result.value.success),1)):o.update.result.value.fail?(d(),n("p",vt," 失敗："+u(`${o.update.result.value.fail}`),1)):h("",!0)])],32),t[45]||(t[45]=e("h3",{class:"h3"},"刪除代辦事項",-1)),e("form",{class:"box mb-32",onSubmit:t[16]||(t[16]=$((...l)=>o.deletion.do&&o.deletion.do(...l),["prevent"]))},[e("div",pt,[e("div",null,[g(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=l=>o.deletion.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[c,o.deletion.form.value.id]])])]),t[33]||(t[33]=e("button",{type:"submit",class:"btn btn-primary"},"刪除",-1)),e("div",gt,[o.deletion.result.value.success?(d(),n("p",ct,u(o.deletion.result.value.success),1)):o.deletion.result.value.fail?(d(),n("p",ft," 失敗："+u(`${o.deletion.result.value.fail}`),1)):h("",!0)])],32),t[46]||(t[46]=e("h3",{class:"h3"},"切換代辦事項狀態",-1)),e("form",{class:"box mb-32",onSubmit:t[18]||(t[18]=$((...l)=>o.toggle.do&&o.toggle.do(...l),["prevent"]))},[e("div",bt,[e("div",null,[g(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=l=>o.toggle.form.value.id=l),placeholder:"請輸入 ID",style:{width:"250px"},required:""},null,512),[[c,o.toggle.form.value.id]])])]),t[34]||(t[34]=e("button",{type:"submit",class:"btn btn-primary"},"切換",-1)),e("div",ht,[o.toggle.result.value.success?(d(),n("p",xt,u(o.toggle.result.value.success),1)):o.toggle.result.value.fail?(d(),n("p",yt," 失敗："+u(`${o.toggle.result.value.fail}`),1)):h("",!0)])],32),e("div",kt,[e("div",wt,[e("div",$t,u((k=z(m))==null?void 0:k.message),1)])]),e("div",Ut,u(p.token),1)],64)}}};export{St as default};
